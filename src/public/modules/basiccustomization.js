import { PrintLastRecords } from './common.js';
import { InjectAlertModal } from './utils.js';
import { CSS } from "../assets/style.js";

const HideElements = () => {
    const elementsToHide = [
        '[href="/MultiCommodity/Index"]',
        '[href="/Traders/Niner2Dashboard"]',
        '[href="/MultiCommodity/add_gatepass"]',
        '[href="/Exemption/ExemptionDashboard"]',
        '[href="/Stock/AvailableStock"]',
        '[href="/Stock/Stocks"]',
        '[href="/Traders/TraderAutogeneratedgatepas"]'
    ];

    elementsToHide.forEach(element => {
        const target = document.querySelector(element);
        if(target) target.style.display = 'none';
    });
}

const AddLinks = () => {
    const sendDocs = document.createElement('li');
    sendDocs.innerHTML = `  <a href="#" onclick="{ window.commonContext.PrintLastRecords('PDF'); }">
                            <i class="fa fa-envelope-o"></i>
                            <span> Send Last Reciepts </span> 
                        </a>`;

    $('#aside > ul > li:nth-child(10)')?.after(sendDocs);

    const printDocs = document.createElement('li');
    printDocs.innerHTML = `  <a href="#" onclick="{ if(confirm('Are You Sure To Print?')) window.commonContext.PrintLastRecords('Printer'); }">
                                                <i class="fa fa-print"></i>
                                                <span> Print Last Reciepts </span> 
                                            </a>`;

    $('#aside > ul > li:nth-child(10)')?.after(printDocs);
}

const ReplaceLink = () => {
    document.querySelector('[href="/Traders/NinerDashboard"]')?.setAttribute('href', '/Traders/NineR');
}

const InjectCSS = () => {
    document.head.appendChild($('<style>').html(CSS)[0]);
}

const HookCommonFunctions = () => {
    window.commonContext = {
        PrintLastRecords
    }
}

export const RunBasicCustomizations = () => {
    InjectCSS();
    HookCommonFunctions();
    InjectAlertModal();
    HideElements();
    AddLinks();
    ReplaceLink();
}