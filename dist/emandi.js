(()=>{"use strict";const e='\n<div id="spinner">\n\t<div id="d1"></div>\n\t<div id="d2"></div>\n\t<div id="d3"></div>\n\t<div id="d4"></div>\n\t<div id="d5"></div>\n</div>\n';class t{FetchRecord(){fetch("https://automationfxapp.azurewebsites.net/emandi/peek").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((e=>{window.formContext.record=e,Object.keys(e).length>1?document.getElementById("record").innerHTML=`\n                     <h4 onclick="window.formContext.SelectEntry()">${e.Seller}</h4>`:document.getElementById("record").innerHTML=""})).catch((e=>{document.getElementById("record").innerHTML="",setTimeout((()=>{alert(e.message)}),200)}))}HideModal(){document.getElementById("customModal").style.display="none"}Capitalize(e){var t="";const n=e.trim().split(" ");for(const e of n)t+=e[0].toUpperCase()+e.slice(1)+" ";return t.trim()}AllowUpdate(e){4==e.length?document.getElementById("updateBtn").removeAttribute("disabled"):document.getElementById("updateBtn").setAttribute("disabled","disabled")}ParseCaptcha(e,t){var n=document.createElement("script");n.src="https://unpkg.com/tesseract.js@4.0.0/dist/tesseract.min.js",n.onload=()=>{var n=document.createElement("canvas");n.width=70,n.height=40,n.getContext("2d").drawImage(document.getElementById(e),0,0);const d=n.toDataURL(),a=document.createElement("img");a.src=d,Tesseract.recognize(a,"eng",{}).then((({data:{text:e}})=>{if(isNaN(e))throw new Error("Captcha Not Parsed!");document.getElementById(t).value=e,document.getElementById(t).dispatchEvent(new Event("change"))})).catch((e=>{alert(e.message)}))},document.getElementsByTagName("body")[0].appendChild(n)}}new class extends t{InitializeForm(){this.AttachListener(),this.FetchRecord(),this.record=window.formContext.record}SelectEntry(){document.getElementById("destination").value=this.record.Mandi,document.getElementById("destination").dispatchEvent(new Event("change")),document.getElementById("carrier").value=this.record.Type,document.getElementById("carrier-no").value=this.record.VehicleNo,document.getElementById("packets").value=this.record.Packets,document.getElementById("statename").value=this.record.State,document.getElementById("space").value=this.record.Distance}AttachListener(){document.getElementById("img-captcha").append(document.getElementById("dntCaptchaImg")),document.getElementById("submit").setAttribute("onclick","window.formContext.PreviewForm()"),document.getElementById("PaidType").value=document.getElementById("PaidType").options[1].value,document.getElementById("PaidType").dispatchEvent(new Event("change")),document.getElementById("in-captcha").addEventListener("change",(({target:e})=>this.AllowUpdate(e.value)));let e=setInterval((()=>{document.getElementById("nine_r_id").options.length>1&&(document.getElementById("nine_r_id").value=document.getElementById("nine_r_id").options[1].value,document.getElementById("nine_r_id").dispatchEvent(new Event("change")),this.ParseCaptcha("dntCaptchaImg","in-captcha"),clearInterval(e))}),1e3)}UpdateForm(){document.getElementById("dist_ofdestination").value=document.getElementById("space").value,document.getElementById("home_center").value=this.Capitalize(document.getElementById("destination").value),document.getElementById("vehicle").value=document.getElementById("carrier").value,document.getElementById("vehicle").dispatchEvent(new Event("change")),document.getElementById("vehicle_no").value=document.getElementById("carrier-no").value.toUpperCase(),document.getElementById("bundle_no").value=document.getElementById("packets").value,document.getElementById("state").value="other",document.getElementById("state").dispatchEvent(new Event("change")),document.getElementById("other_state_mandi").value=this.Capitalize(document.getElementById("statename").value),document.getElementById("DNTCaptchaInputText").value=document.getElementById("in-captcha").value,document.getElementById("previewBtn").removeAttribute("disabled")}PreviewForm(){preview_data(),fetch("https://automationfxapp.azurewebsites.net/emandi/update",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({GatepassId:document.getElementById("transaction_number").value})}).finally((()=>{fetch("https://automationfxapp.azurewebsites.net/emandi/pop")}))}},new class extends t{InitializeForm(){this.FetchRecord(),this.AttachListener(),this.record=window.formContext.record}SelectEntry(){document.getElementById("sname").value=this.record.Seller,document.getElementById("quantity").value=this.record.Weight}AttachListener(){document.getElementById("img-captcha").append(document.getElementById("dntCaptchaImg")),document.getElementById("submit").setAttribute("onclick","window.formContext.PreviewForm()"),document.getElementById("rateofcrop").addEventListener("DOMSubtreeModified",(e=>{document.getElementById("crop_rate").value=this.record.Rate,document.getElementById("crop_rate").dispatchEvent(new Event("change"))})),document.getElementById("in-captcha").addEventListener("change",(({target:e})=>this.AllowUpdate(e.value))),this.ParseCaptcha("dntCaptchaImg","in-captcha")}UpdateForm(){document.getElementById("vikreta_details").value=this.Capitalize(document.getElementById("sname").value),document.getElementById("vikreta_mobile").value="7037433280",document.getElementById("ForSelf").checked=!0,document.getElementById("ForSelf").dispatchEvent(new Event("change")),document.getElementById("crop_code").value="58",document.getElementById("crop_code").dispatchEvent(new Event("change")),document.getElementById("crop_type").value="Mota",document.getElementById("crop_weight").value=parseFloat(document.getElementById("quantity").value).toFixed(3),document.getElementById("DNTCaptchaInputText").value=document.getElementById("in-captcha").value,document.getElementById("previewBtn").removeAttribute("disabled")}PreviewForm(){preview_data(),this.record.Rate!=document.getElementById("crop_rate").value&&(this.record.Id&&fetch("https://automationfxapp.azurewebsites.net/emandi/update",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({Rate:document.getElementById("crop_rate").value})}).catch((()=>{})),fetch("https://automationfxapp.azurewebsites.net/emandi/rate",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({Rate:document.getElementById("crop_rate").value})}).then((e=>{if(!e.ok)throw new Error(e.statusText)})).catch((e=>{alert(e.message)})))}},new class extends t{InitializeForm(){this.AttachListener()}AttachListener(){let e=setInterval((()=>{document.querySelector("#datatable1 > tbody").childElementCount>0&&(clearInterval(e),document.getElementsByClassName("chk").length>0?(document.getElementsByClassName("chk")[0].click(),document.getElementById("proceddnow").click()):alert("No Payment Pending"))}),1e3)}},new class{InitializeForm(){document.getElementById("filter").click()}},new class extends t{InitializeForm(){this.ParseCaptcha("dntCaptchaImg","DNTCaptchaInputText")}},new class extends t{InitializeForm(){document.getElementById("Pay").click()}},new class extends t{InitializeForm(){this.FetchRecord(),this.record=window.formContext.record}SelectEntry(){document.getElementById("bname").value=this.record.Party}UpdateForm(){document.getElementById("buyer_state").checked=!0,document.getElementById("buyer_state").dispatchEvent(new Event("change")),document.getElementById("ForSelf").checked=!0,document.getElementById("ForSelf").dispatchEvent(new Event("change")),document.getElementById("crop_code").value="58",document.getElementById("crop_code").dispatchEvent(new Event("change")),document.getElementById("kreta_details").value=this.Capitalize(document.getElementById("bname").value),document.getElementById("StockTypeCategory").value="1",document.getElementById("StockTypeCategory").dispatchEvent(new Event("change")),document.getElementsByName("PayType")[1].checked=!0,document.getElementsByName("PayType")[1].dispatchEvent(new Event("change")),document.getElementById("nextBtn").removeAttribute("disabled")}Next(){submitDetailsForm()}},new class extends t{InitializeForm(){this.RegisterListener(),this.FetchRecord(),this.record=window.formContext.record}RegisterListener(){document.getElementById("img-captcha").append(document.getElementById("dntCaptchaImg")),document.getElementById("submitbtn").setAttribute("onclick","window.formContext.PreviewForm()"),document.getElementById("crop_type").value="Mota",document.querySelector('input[type="checkbox"]').checked=!0,document.querySelector('input[type="checkbox"]').dispatchEvent(new Event("click")),document.getElementById("in-captcha").addEventListener("change",(({target:e})=>this.AllowUpdate(e.value))),this.ParseCaptcha("dntCaptchaImg","in-captcha")}UpdateForm(){document.getElementsByClassName("weights")[0].value=document.getElementsByClassName("Currentweights")[0].value,document.getElementsByClassName("weights")[0].dispatchEvent(new Event("change")),document.getElementById("rate").value=this.record.Rate,document.getElementById("rate").dispatchEvent(new Event("change")),document.getElementById("DNTCaptchaInputText").value=document.getElementById("in-captcha").value,document.getElementById("previewBtn").removeAttribute("disabled")}PreviewForm(){preview_data(),fetch("https://automationfxapp.azurewebsites.net/emandi/update",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({SixrId:document.querySelector(".instrumentNumber").value})})}},new class extends t{InitializeForm(){fetch(`https://automationfxapp.azurewebsites.net/emandi/searchbysixr?Id=${document.querySelector("#tab_logic > tbody > tr > td:nth-child(8) > label").innerHTML.trim()}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).then((e=>{document.getElementById("download").checked="PDF"==e.Mode,document.getElementById("download").dispatchEvent(new Event("change"))})).catch((()=>{})).finally((()=>{document.getElementById("record").innerHTML=""}))}Print(t){var n=[],d=document.querySelector("body > div.row > #content");n.push(d.querySelector(".table").outerHTML),n.push(d.querySelector(".row .col-md-12 table").outerHTML);var a={name:"niner",tables:n,qr:d.querySelector("#qrcode img").src,download:t},o=new XMLHttpRequest;o.onload=function(){201!=o.status?alert(`Error ${o.status}: ${o.response}`):(document.getElementById("customModal").style.display="none",t?window.open("https://automationfxapp.azurewebsites.net/files/"+o.response):setTimeout((()=>{alert("Print Job Created!")}),200))},o.open("POST","https://automationfxapp.azurewebsites.net/html",!0),o.setRequestHeader("Content-Type","application/json;"),o.send(JSON.stringify(a)),document.getElementById("modalContent").innerHTML=`${e}<hr><div>Please Wait<div>`}};new class extends t{InitializeForm(){fetch(`https://automationfxapp.azurewebsites.net/emandi/searchbygatepass?Id=${document.querySelector("#content > table.table.table-bordered > tbody > tr:nth-child(1) > td:nth-child(4) > label").innerHTML.trim()}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).then((e=>{document.getElementById("download").checked="PDF"==e.Mode,document.getElementById("download").dispatchEvent(new Event("change"))})).catch((()=>{})).finally((()=>{document.getElementById("record").innerHTML=""}))}Print(t){var n=[],d=document.querySelector("body > div.row > #content");n.push(d.querySelector(".table").outerHTML),n.push(d.querySelector(".row .col-md-12 table").outerHTML),n.push(d.querySelectorAll(".row .col-md-12 table")[1].outerHTML),n.push(d.querySelectorAll(".row .col-md-12 .row")[0].outerHTML);var a={name:"gatepass",tables:n,qr:d.querySelector("#qrcode img").src,download:t},o=new XMLHttpRequest;o.onload=function(){201!=o.status?alert(`Error ${o.status}: ${o.response}`):(document.getElementById("customModal").style.display="none",t?window.open("https://automationfxapp.azurewebsites.net/files/"+o.response):setTimeout((()=>{alert("Print Job Created!")}),200))},o.open("POST","https://automationfxapp.azurewebsites.net/html",!0),o.setRequestHeader("Content-Type","application/json;"),o.send(JSON.stringify(a)),document.getElementById("modalContent").innerHTML=`${e}<hr><div>Please Wait<div>`}}})();